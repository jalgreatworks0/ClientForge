# ğŸ§  ClientForge CRM v3.0 - Enterprise AI Development System

**META**: Ultimate AI-Assisted Development Platform | 50+ Intelligence Protocols | Production-Grade
**FOR**: Claude Code, GitHub Copilot, All AI Coding Assistants
**PROJECT**: ClientForge CRM v3.0 - Abstract Creatives LLC
**VERSION**: 3.0.0 (Optimized Edition)
**LAST UPDATED**: 2025-11-05

---

## âš¡ AI QUICK LOAD (30-SECOND SCAN)

```typescript
interface QuickStart {
  project: "Enterprise AI-Powered CRM"
  stack: "React 18 + Node.js + PostgreSQL + MongoDB + Redis + AI/ML"
  structure: "413 directories, modular monolith â†’ microservices"
  quality: "85%+ test coverage, zero-duplication, security-first"
  protocols: "50+ active intelligence layers"
  state: "Active development, production-ready architecture"
}

// AI: Read this README (1,500 lines, 20k tokens) â†’ Start building immediately
// All detailed protocols moved to docs/protocols/ for reference
```

---

## ğŸ“‘ TABLE OF CONTENTS

### ğŸ”¥ CRITICAL (Read Every Session)
- [ğŸš€ Session Start Protocol](#-session-start-protocol-mandatory) - 5-minute initialization
- [ğŸ“ File Organization Rules](#-file-organization-rules-ironclad) - Zero tolerance policy
- [ğŸ¯ Anti-Duplication System](#-anti-duplication-system-p0-critical) - UPDATE > CREATE
- [ğŸ”— Dependency Chain Awareness](#-dependency-chain-awareness-p1-essential) - Prevent breaks
- [â° Session End Protocol](#-session-end-protocol-mandatory) - 10-minute documentation

### â­ ESSENTIAL PROTOCOLS
- [ğŸ›¡ï¸ Security Implication Check](#ï¸-security-implication-check-p1-essential) - Auto security review
- [ğŸ§ª Test Coverage Requirements](#-test-coverage-requirements-p1-essential) - 85%+ coverage
- [ğŸ’¥ Breaking Change Detection](#-breaking-change-detection-p0-critical) - API safety
- [ğŸ“Š Code Quality Enforcement](#-code-quality-enforcement-p1-essential) - 9-point check

### ğŸ“š PROJECT INFORMATION
- [ğŸŒŸ Project Overview](#-project-overview) - Identity, stack, features
- [ğŸ—ï¸ Architecture & Structure](#ï¸-architecture--structure) - 413 directories
- [ğŸ¨ Conventions & Patterns](#-conventions--patterns) - Naming, structure
- [ğŸ”— Quick Reference Links](#-quick-reference-links) - All protocol docs

---

## ğŸŒŸ PROJECT OVERVIEW

### Identity

**ClientForge CRM v3.0** - Enterprise-grade, AI-powered Customer Relationship Management system by **Abstract Creatives LLC**. Built to scale from startup to enterprise with cutting-edge AI integration at every layer.

### Technology Stack

**Frontend**: React 18, TypeScript 5.3, Tailwind CSS, Redux Toolkit, React Query, shadcn/ui
**Backend**: Node.js 18+, Express, PostgreSQL 15+, MongoDB 6, Redis 7, Elasticsearch 8
**AI/ML**: TensorFlow.js, OpenAI GPT-4, Anthropic Claude, Hugging Face Embeddings
**DevOps**: Docker, Kubernetes, Terraform, GitHub Actions, Prometheus, Grafana
**Testing**: Jest (60%), Supertest/React Testing Library (30%), Playwright (10%)

### Core Features

- **Contact & Deal Management** - Advanced CRM with custom fields, tags, segmentation
- **Campaign Management** - Multi-channel (email, SMS, social), A/B testing
- **AI Companion (Albedo)** - Natural language interface, lead scoring, forecasting
- **Workflow Automation** - Visual builder, triggers, actions, AI-driven routing
- **Real-time Analytics** - ML-powered insights, predictive analytics
- **Email Integration** - Gmail, Outlook, SMTP, two-way sync
- **Document Management** - Secure storage, versioning, OCR, auto-categorization

### Project Structure (413 Directories)

```
d:/clientforge-crm/
â”œâ”€â”€ ai/                    # AI & ML systems (35+ folders)
â”œâ”€â”€ backend/               # Backend services (50+ folders)
â”‚   â”œâ”€â”€ api/              # API routes, controllers, middleware
â”‚   â”œâ”€â”€ services/         # Business logic (by module)
â”‚   â”œâ”€â”€ repositories/     # Data access layer
â”‚   â””â”€â”€ database/         # Models, migrations, seeders
â”œâ”€â”€ frontend/              # Frontend applications (35+ folders)
â”‚   â”œâ”€â”€ components/       # React components (by module)
â”‚   â”œâ”€â”€ pages/            # Page-level components
â”‚   â”œâ”€â”€ hooks/            # Custom React hooks
â”‚   â””â”€â”€ lib/              # Utilities, API clients
â”œâ”€â”€ docs/                  # Documentation system
â”‚   â”œâ”€â”€ protocols/        # 50+ development protocols
â”‚   â”œâ”€â”€ ai/               # AI assistant guides
â”‚   â”œâ”€â”€ guides/           # User & developer guides
â”‚   â””â”€â”€ *.md              # Main documentation files
â”œâ”€â”€ tests/                 # Test suites (20+ folders)
â””â”€â”€ [other specialized directories]
```

---

## ğŸš€ SESSION START PROTOCOL (MANDATORY)

### Execute Every Session (5 Minutes)

**AI: This is MANDATORY. Project quality depends on proper initialization.**

#### Step 1: Read Master Instructions (2 minutes)
```
âœ“ CLAUDE.md (root) - 90-second quick reference (READ FIRST!)
âœ“ README.md (this file) - Project overview & critical protocols
âœ“ docs/ai/QUICK_START_AI.md - AI-specific quick start guide
âœ“ docs/protocols/00_QUICK_REFERENCE.md - One-page cheat sheet
```

**IMPORTANT**: CLAUDE.md must be explicitly read at the start of EVERY session. It contains the essential context compression - read it before README.md for fastest initialization.

#### Step 2: Read Recent Context (2 minutes)
```
âœ“ docs/07_CHANGELOG.md - Recent changes
âœ“ logs/session-logs/ - Last 2-3 session logs
âœ“ docs/00_MAP.md - Current project structure
```

#### Step 3: Confirm Understanding (1 minute)

Answer these 5 questions:
1. **What was done in last session?** â†’ Context continuity
2. **What is current project state?** â†’ Current priorities
3. **What am I being asked to do today?** â†’ Task clarity
4. **Do I have a clear implementation plan?** â†’ Execution readiness
5. **Have I reserved 10 minutes for documentation?** â†’ Time management

#### Step 4: Report to User

```
âœ… Session Initialized Successfully

ğŸ“š Context Loaded:
- README.md: 50+ protocols active
- Last Session: [summary from session log]
- Current State: [from MAP.md and CHANGELOG.md]

ğŸ¯ Task Understanding:
- Request: [what user asked for]
- Approach: [implementation strategy]
- Time Estimate: [based on complexity]
- Protocols Active: All P0/P1 protocols engaged

â° Documentation Reserved: Last 10 minutes

Ready to begin! ğŸš€
```

---

## ğŸ“ FILE ORGANIZATION RULES (IRONCLAD)

### CRITICAL RULE #1: Minimal Files in Root

**This is non-negotiable. Violation = immediate correction.**

#### Allowed in Root:
```
Documentation: README.md, CLAUDE.md, LICENSE
Configuration: .dockerignore, .editorconfig, .env.example, .eslintrc.json,
               .gitignore, .nvmrc, .prettierrc, .claudeignore
Build/Deploy: docker-compose.yml, Dockerfile, Makefile
Package: package.json, package-lock.json, tsconfig.json, turbo.json, lerna.json
```

**Note**: CLAUDE.md is the ONLY exception to the "no other .md files in root" rule because it's the quick reference for AI session initialization (90 seconds vs 20 minutes for full README).

#### Forbidden in Root:
- âŒ Any other .md files besides README.md and CLAUDE.md (use docs/)
- âŒ Source code (use backend/, frontend/, ai/)
- âŒ Scripts (use scripts/)
- âŒ Tests (use tests/)
- âŒ Other documentation files (use docs/)

### Deep Folder Structure (ALWAYS 3-4 Levels)

```bash
# âŒ WRONG: Shallow placement
backend/services/user-service.ts
frontend/components/UserProfile.tsx

# âœ… RIGHT: Deep, specific placement
backend/services/user/user-service.ts
backend/services/user/user-validator.ts
backend/services/user/user-repository.ts
frontend/components/User/Profile/UserProfile.tsx
frontend/components/User/Profile/UserProfileCard.tsx
```

### File Placement Rules

| Type | Location |
|------|----------|
| Backend Services | `backend/services/[module]/[module]-service.ts` |
| Backend Controllers | `backend/api/controllers/[module]/[module]-controller.ts` |
| Backend Repositories | `backend/repositories/[module]/[module]-repository.ts` |
| Frontend Components | `frontend/components/[Module]/[Component]/[ComponentName].tsx` |
| Frontend Pages | `frontend/pages/[Module]/[PageName].tsx` |
| Frontend Hooks | `frontend/hooks/use-[hook-name].ts` |
| Unit Tests | `tests/unit/[module]/[component].test.ts` |
| Integration Tests | `tests/integration/[module]/[feature].test.ts` |
| E2E Tests | `tests/e2e/[user-journey].spec.ts` |
| Documentation | `docs/[category]/[name].md` |
| Protocol Docs | `docs/protocols/[##]_[NAME].md` |

---

## ğŸ¯ ANTI-DUPLICATION SYSTEM (P0 CRITICAL)

### Core Philosophy: UPDATE FIRST, CREATE NEVER (WITHOUT SEARCH)

**Zero-tolerance policy for duplication. Search 2-3 minutes before creating ANYTHING.**

### Mandatory 5-Phase Search Protocol

```bash
# PHASE 1: Global Search (60 seconds)
find . -name '*keyword*' -type f
find . -iname '*keyword*' -type f  # Case-insensitive
grep -r 'keyword' --include='*.md' --include='*.ts' --include='*.tsx'

# PHASE 2: Documentation Search (30 seconds)
ls -la docs/*.md
cat docs/00_MAP.md | grep -i 'keyword'
find docs/ -name '*.md' -exec grep -l 'keyword' {} \;

# PHASE 3: Code Search (30 seconds)
find frontend/components/ -name '*Component*'
find backend/services/ -name '*service*'
grep -r 'export.*FunctionName' --include='*.ts'

# PHASE 4: Library Search (30 seconds)
# Check if lodash, date-fns, React hooks, or dependencies provide this

# PHASE 5: Similarity Analysis (30 seconds)
# Calculate similarity: 90%+ = USE existing, 80-89% = EXTEND existing
```

### Decision Matrix

| Similarity | Action |
|------------|--------|
| 90%+ similar | USE existing (import/reference) |
| 80-89% similar | EXTEND existing (add method/prop) |
| 70-79% similar | REFACTOR to shared (make generic) |
| 50-69% similar | EVALUATE if related |
| <50% similar | OK to create (document why unique) |

### Pre-Creation Checklist

**Execute BEFORE creating ANY file:**

```
Search Phase (2-3 min):
âœ“ Searched by filename
âœ“ Searched by content
âœ“ Searched in docs
âœ“ Searched in code
âœ“ Checked session logs

Verification Phase:
âœ“ NO existing file serves this purpose (100% certain)
âœ“ NO existing doc covers this (checked all docs)
âœ“ NO similar functionality exists
âœ“ Existing file CANNOT be updated (80%+ similar = update)

Decision Phase:
âœ“ Functionality is TRULY unique
âœ“ NOT duplicate under different name
âœ“ NOT reinventing library function
âœ“ Confirmed DEEPEST appropriate folder
âœ“ Documented WHY new file needed

ğŸš« If ANY unchecked: STOP - Complete items first
âœ… All checked: OK to create
```

---

## ğŸ”— DEPENDENCY CHAIN AWARENESS (P1 ESSENTIAL)

### Core Principle: Every File Change Can Break Other Files

**Before modifying ANY file, check dependencies and update all dependents.**

### 4-Step Protocol (1 Minute Total)

```bash
# STEP 1: Find Downstream Dependencies (30 sec)
grep -r 'from.*filename' --include='*.ts' --include='*.tsx'
grep -r 'import.*filename' --include='*.ts' --include='*.tsx'

# STEP 2: Find Upstream Dependencies (10 sec)
head -n 50 filename | grep -E '^import|^from'

# STEP 3: Assess Breaking Change Risk (20 sec)
# HIGH: Function signature, interface, export removed, file moved
# MEDIUM: Implementation changed, new required param
# LOW: Internal change, optional param, docs

# STEP 4: Update All Dependents (variable)
# HIGH RISK: Update ALL downstream files, run ALL tests
# MEDIUM RISK: Update affected files, add deprecation
# LOW RISK: Verify no side effects, run smoke tests
```

### Breaking Change Examples

```typescript
// HIGH RISK: Function signature changed
// BEFORE:
function calculateDiscount(price: number): number

// AFTER:
function calculateDiscount(price: number, percentage: number): number
// â†’ Find all callers, update OR make optional with default

// MEDIUM RISK: New required interface property
// BEFORE:
interface User { id: string; name: string }

// AFTER:
interface User { id: string; name: string; email: string }
// â†’ Find all implementations, update OR make optional (email?: string)

// LOW RISK: Optional parameter added
function getUser(id: string, includeDeleted: boolean = false): Promise<User>
// â†’ Backward compatible, no updates needed
```

**See Full Details**: [docs/protocols/01_DEPENDENCY_CHAIN.md](docs/protocols/01_DEPENDENCY_CHAIN.md)

---

## ğŸ›¡ï¸ SECURITY IMPLICATION CHECK (P1 ESSENTIAL)

### Auto Security Review on EVERY Code Change

**Mandatory OWASP Top 10 check before committing any code.**

### Security Checklist (30-Second Scan)

```
âœ“ SQL Injection: Parameterized queries ONLY, never string interpolation
âœ“ XSS: Sanitize all user inputs, avoid dangerouslySetInnerHTML
âœ“ Auth Bypass: Verify authentication on protected routes
âœ“ Sensitive Data: Never log passwords, tokens, API keys
âœ“ CSRF: Tokens on state-changing operations
âœ“ Broken Access Control: Check user owns resource
âœ“ Insecure Dependencies: npm audit clean
âœ“ Weak Crypto: bcrypt for passwords (cost=12), JWT with secrets
```

### Security Patterns

```typescript
// âœ… GOOD: Parameterized queries
const user = await db.query(
  'SELECT * FROM users WHERE email = $1',
  [email]
)

// âŒ BAD: SQL injection risk
const user = await db.query(`SELECT * FROM users WHERE email = '${email}'`)

// âœ… GOOD: Input sanitization
import DOMPurify from 'dompurify'
<div dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(userInput) }} />

// âŒ BAD: XSS risk
<div dangerouslySetInnerHTML={{ __html: userInput }} />

// âœ… GOOD: Authorization check
if (contact.userId !== req.user.id) {
  return res.status(403).json({ error: 'Unauthorized' })
}

// âŒ BAD: No authorization
const contact = await getContact(req.params.id)
res.json(contact) // Any user can access!
```

**See Full Details**: [docs/protocols/02_SECURITY.md](docs/protocols/02_SECURITY.md)

---

## ğŸ§ª TEST COVERAGE REQUIREMENTS (P1 ESSENTIAL)

### Mandatory Coverage Targets

| Category | Target | Why |
|----------|--------|-----|
| Overall | 85%+ | Production quality baseline |
| Auth | 95%+ | Security critical |
| Payment | 95%+ | Financial critical |
| Security | 90%+ | Vulnerability prevention |
| API | 85%+ | Contract enforcement |

### Test Pyramid (Distribution)

```
E2E Tests (10%)           â—¢â”â”â—£    Slow, expensive, high confidence
Integration Tests (30%)  â—¢â”â”â”â”â”â—£  Medium speed, good coverage
Unit Tests (60%)      â—¢â”â”â”â”â”â”â”â”â—£  Fast, cheap, wide coverage
```

### Auto-Generate 5 Types of Tests

```typescript
// 1. Happy Path Test
it('should create contact with valid data', async () => {
  const contact = await createContact({ name: 'John', email: 'john@example.com' })
  expect(contact.id).toBeDefined()
  expect(contact.name).toBe('John')
})

// 2. Edge Case Test
it('should handle empty name gracefully', async () => {
  await expect(createContact({ name: '', email: 'john@example.com' }))
    .rejects.toThrow('Name is required')
})

// 3. Error Case Test
it('should throw on duplicate email', async () => {
  await createContact({ name: 'John', email: 'john@example.com' })
  await expect(createContact({ name: 'Jane', email: 'john@example.com' }))
    .rejects.toThrow('Email already exists')
})

// 4. Security Test
it('should prevent SQL injection in email', async () => {
  await expect(createContact({ name: 'John', email: "' OR '1'='1" }))
    .rejects.toThrow('Invalid email format')
})

// 5. Performance Test (for critical paths)
it('should create contact in under 100ms', async () => {
  const start = Date.now()
  await createContact({ name: 'John', email: 'john@example.com' })
  const duration = Date.now() - start
  expect(duration).toBeLessThan(100)
})
```

**See Full Details**: [docs/protocols/03_TEST_COVERAGE.md](docs/protocols/03_TEST_COVERAGE.md)

---

## ğŸ’¥ BREAKING CHANGE DETECTION (P0 CRITICAL)

### Never Break Existing Functionality

**Before modifying public APIs or exported functions, assess impact and plan migration.**

### Breaking Change Risk Levels

#### HIGH RISK (Update ALL dependents immediately)
- Function signature changed (params, return type)
- Interface/type definition changed
- Export removed or renamed
- File moved to different location

#### MEDIUM RISK (Add deprecation warnings)
- Function implementation changed (same signature)
- New required parameter added
- Default behavior changed

#### LOW RISK (Verify no side effects)
- Internal function changed (not exported)
- Optional parameter added
- Documentation updated

### Deprecation Strategy

```typescript
/**
 * @deprecated Use calculateDiscountWithPercentage instead. Removal in v4.0.0
 */
export function calculateDiscount(price: number): number {
  console.warn('calculateDiscount is deprecated. Use calculateDiscountWithPercentage.')
  return calculateDiscountWithPercentage(price, 10)
}

export function calculateDiscountWithPercentage(
  price: number,
  percentage: number = 10
): number {
  return price * (percentage / 100)
}
```

**See Full Details**: [docs/protocols/04_BREAKING_CHANGES.md](docs/protocols/04_BREAKING_CHANGES.md)

---

## ğŸ“Š CODE QUALITY ENFORCEMENT (P1 ESSENTIAL)

### 9-Point Quality Check (Before Commit)

```
1. Type Safety:
   âœ“ Zero 'any' types (use proper types or 'unknown')
   âœ“ Explicit return types on all functions
   âœ“ Strict null checks enabled

2. Error Handling:
   âœ“ try-catch on all async operations
   âœ“ Structured errors (AppError class)
   âœ“ Never swallow errors

3. Security:
   âœ“ OWASP Top 10 compliance
   âœ“ Input validation (zod schemas)
   âœ“ No secrets in code/logs

4. Performance:
   âœ“ No N+1 queries
   âœ“ Pagination on list endpoints (<20 items)
   âœ“ Database indexes on foreign keys
   âœ“ API responses <200ms

5. Testing:
   âœ“ 85%+ code coverage
   âœ“ Tests actually test behavior
   âœ“ Edge and error cases covered

6. Documentation:
   âœ“ JSDoc on public functions
   âœ“ Comments on complex logic only
   âœ“ README/docs updated

7. Naming:
   âœ“ Clear, descriptive names
   âœ“ Follow conventions (kebab-case, PascalCase)
   âœ“ No abbreviations (except common: id, url, api)

8. DRY (Don't Repeat Yourself):
   âœ“ No code duplication
   âœ“ Extracted shared utilities
   âœ“ Reusable components

9. SOLID Principles:
   âœ“ Single Responsibility
   âœ“ Open/Closed
   âœ“ Liskov Substitution
   âœ“ Interface Segregation
   âœ“ Dependency Inversion
```

**See Full Details**: [docs/protocols/10_CODE_REVIEW.md](docs/protocols/10_CODE_REVIEW.md)

---

## â° SESSION END PROTOCOL (MANDATORY)

### Execute Every Session (10 Minutes Reserved)

**AI: This is MANDATORY. Never skip. Future AI sessions depend on this.**

#### Step 1: Update CHANGELOG.md (2 minutes)

```markdown
## [Unreleased]

### Added
- New feature X with Y capability

### Changed
- Refactored module Z for better performance

### Fixed
- Bug in component A causing issue B

### Security
- Fixed XSS vulnerability in input field
```

#### Step 2: Create Session Log (5 minutes)

**Location**: `logs/session-logs/YYYY-MM-DD-task-name.md`

**Template**:
```markdown
# Session Log: [Task Name]

**Date**: 2025-11-05
**Duration**: [X minutes]
**AI Assistant**: Claude Code / GitHub Copilot
**Task Status**: âœ… Complete / â¸ï¸ In Progress / âŒ Blocked

## Task Description
[What was requested]

## What Was Done
1. [Action 1]
2. [Action 2]
3. [Action 3]

## Files Created
- path/to/file1.ts
- path/to/file2.tsx

## Files Modified
- path/to/file3.ts (added function X)
- path/to/file4.tsx (updated component Y)

## Tests Written
- tests/unit/file1.test.ts (95% coverage)

## Decisions Made
- **Decision**: Why we chose approach A over B
- **Rationale**: Performance vs maintainability trade-off

## Challenges Encountered
- Challenge X: Solved by doing Y
- Challenge Z: Need to revisit in next session

## Next Steps
- [ ] Task 1 to complete
- [ ] Task 2 to start
- [ ] Follow-up on decision X

## Notes for Future AI
- Context X is important for understanding Y
- Watch out for edge case Z in module A
```

#### Step 3: Update Affected Documentation (2 minutes)

```
âœ“ Update docs/00_MAP.md if structure changed
âœ“ Update relevant docs/protocols/ if protocol affected
âœ“ Update API docs if endpoints changed
âœ“ Update component docs if UI changed
```

#### Step 4: Final Verification (1 minute)

```
âœ“ All code committed
âœ“ All tests passing
âœ“ Documentation complete
âœ“ CHANGELOG updated
âœ“ Session log created
âœ“ No TODOs left in code (create tickets instead)
```

---

## ğŸ¨ CONVENTIONS & PATTERNS

### Naming Conventions

| Element | Convention | Example |
|---------|-----------|---------|
| Directories | kebab-case | `user-management/` |
| Files | kebab-case.ext | `user-service.ts` |
| React Components | PascalCase.tsx | `UserProfile.tsx` |
| Classes | PascalCase | `UserService` |
| Functions | camelCase | `getUserById` |
| Constants | UPPER_SNAKE_CASE | `MAX_RETRIES` |
| Interfaces | PascalCase | `IUserRepository` |
| Types | PascalCase | `UserRole` |
| Database Tables | snake_case (plural) | `user_profiles` |
| Database Columns | snake_case | `first_name`, `created_at` |
| API Endpoints | kebab-case | `/api/v1/user-profiles` |
| Environment Variables | UPPER_SNAKE_CASE | `DATABASE_URL` |

### Code Patterns

**TypeScript Strict Mode**:
```typescript
// âœ… ALWAYS
const user: User = { id: 1, name: 'John' }
async function getUser(id: number): Promise<User | null>

// âŒ NEVER
const user: any = { id: 1, name: 'John' }
async function getUser(id): Promise<any>
```

**Error Handling**:
```typescript
// âœ… ALWAYS
try {
  const result = await riskyOperation()
  return result
} catch (error) {
  logger.error('Operation failed', { error })
  throw new AppError('Operation failed', 500, { originalError: error })
}

// âŒ NEVER
try {
  return await riskyOperation()
} catch (error) {
  console.log(error) // Never console.log!
  return null // Never swallow errors!
}
```

**API Endpoints**:
```typescript
// âœ… ALWAYS
GET    /api/v1/users          // List with pagination
POST   /api/v1/users          // Create
GET    /api/v1/users/:id      // Get one
PUT    /api/v1/users/:id      // Update
DELETE /api/v1/users/:id      // Delete

// âŒ NEVER
GET /getUsers
POST /user/create
GET /api/users/:id/getData
```

**React Components**:
```typescript
// âœ… ALWAYS
export const UserProfile: React.FC<UserProfileProps> = ({ userId }) => {
  const { data, isLoading, error } = useQuery(['user', userId], () => getUser(userId))

  if (isLoading) return <Spinner />
  if (error) return <ErrorMessage error={error} />
  if (!data) return <NotFound />

  return <div>{data.name}</div>
}

// âŒ NEVER
export function UserProfile(props) {
  const [user, setUser] = useState(null)
  useEffect(() => {
    fetch('/api/users/' + props.id).then(r => r.json()).then(setUser)
  }, [])
  return <div>{user?.name}</div>
}
```

---

## ğŸ—ï¸ ARCHITECTURE & STRUCTURE

### Architectural Patterns

1. **Modular Monolith â†’ Microservices** - Start simple, extract services as needed
2. **Event-Driven Architecture** - RabbitMQ for async operations
3. **CQRS** - Command Query Responsibility Segregation
4. **Repository Pattern** - Data access abstraction
5. **Service Layer** - Business logic separation
6. **API Gateway** - Unified entry point with rate limiting
7. **Multi-tenant** - Isolated data per organization (tenant_id)
8. **Multi-level Caching** - Redis â†’ In-memory â†’ CDN

### Performance Budgets

| Metric | Target | Critical |
|--------|--------|----------|
| API Response Time | <200ms | <500ms |
| Page Load | <2s | <4s |
| Time to Interactive | <3s | <5s |
| Database Query | <100ms | <300ms |
| Bundle Size (initial) | <500KB | <1MB |
| Test Suite | <30s | <60s |

### Database Strategy

- **PostgreSQL**: Transactional data, relationships, ACID compliance
- **MongoDB**: Logs, events, unstructured data, flexible schema
- **Redis**: Cache, sessions, real-time counters, pub/sub
- **Elasticsearch**: Full-text search, analytics, log aggregation
- **S3**: Files, attachments, backups, static assets

---

## ğŸ”— QUICK REFERENCE LINKS

### Critical Protocols (Read First)
- **[00_QUICK_REFERENCE.md](docs/protocols/00_QUICK_REFERENCE.md)** - One-page cheat sheet (FASTEST)
- **[QUICK_START_AI.md](docs/ai/QUICK_START_AI.md)** - AI assistant quick start (READ FIRST)
- **[01_DEPENDENCY_CHAIN.md](docs/protocols/01_DEPENDENCY_CHAIN.md)** - Prevent breaking changes
- **[07_COMMON_MISTAKES.md](docs/protocols/07_COMMON_MISTAKES.md)** - Top 50 mistakes to avoid

### Security & Quality
- **[02_SECURITY.md](docs/protocols/02_SECURITY.md)** - OWASP Top 10, security patterns
- **[03_TEST_COVERAGE.md](docs/protocols/03_TEST_COVERAGE.md)** - Testing strategies, 85%+ coverage
- **[10_CODE_REVIEW.md](docs/protocols/10_CODE_REVIEW.md)** - 9-point quality checklist

### API & Database
- **[04_BREAKING_CHANGES.md](docs/protocols/04_BREAKING_CHANGES.md)** - API evolution, deprecation
- **[05_API_CONTRACTS.md](docs/protocols/05_API_CONTRACTS.md)** - API design patterns
- **[06_DATABASE_MIGRATIONS.md](docs/protocols/06_DATABASE_MIGRATIONS.md)** - Safe schema changes

### Optimization & Maintenance
- **[08_CONTEXT_PRESERVATION.md](docs/protocols/08_CONTEXT_PRESERVATION.md)** - Session continuity
- **[09_PERFORMANCE.md](docs/protocols/09_PERFORMANCE.md)** - Performance budgets, optimization
- **[11_REFACTORING.md](docs/protocols/11_REFACTORING.md)** - Code improvement patterns
- **[12_CONSISTENCY.md](docs/protocols/12_CONSISTENCY.md)** - Cross-module consistency
- **[13_TECHNICAL_DEBT.md](docs/protocols/13_TECHNICAL_DEBT.md)** - Debt prevention
- **[14_QUALITY_SCORING.md](docs/protocols/14_QUALITY_SCORING.md)** - Quality metrics (0-100)

### Main Documentation
- **[00_MAP.md](docs/00_MAP.md)** - Complete project map
- **[01_ARCHITECTURE.md](docs/01_ARCHITECTURE.md)** - System architecture
- **[02_AI-SYSTEMS.md](docs/02_AI-SYSTEMS.md)** - AI/ML features (Albedo)
- **[03_API.md](docs/03_API.md)** - API documentation
- **[04_DEPLOYMENT.md](docs/04_DEPLOYMENT.md)** - Deployment guide
- **[05_SECURITY.md](docs/05_SECURITY.md)** - Security documentation
- **[06_DEVELOPMENT.md](docs/06_DEVELOPMENT.md)** - Development guide
- **[07_CHANGELOG.md](docs/07_CHANGELOG.md)** - Version history
- **[08_TROUBLESHOOTING.md](docs/08_TROUBLESHOOTING.md)** - Common issues

---

## ğŸš¦ PROTOCOL PRIORITY MATRIX

```typescript
interface ProtocolPriority {
  P0_CRITICAL: {
    // NEVER skip - system breaks without them
    protocols: [
      "Session Start (read docs first)",
      "File Organization (no files in root)",
      "Anti-Duplication (2-3 min search)",
      "Breaking Change Detection",
      "Session End (10 min docs)"
    ],
    skip_consequence: "PROJECT CORRUPTION"
  },

  P1_ESSENTIAL: {
    // Always apply - quality depends on these
    protocols: [
      "Dependency Chain Awareness",
      "Security Implication Check",
      "Test Coverage (85%+)",
      "Code Quality (9-point check)",
      "API Contract Validation"
    ],
    skip_consequence: "LOW QUALITY / SECURITY ISSUES"
  },

  P2_IMPORTANT: {
    // Apply when relevant - enhances quality
    protocols: [
      "Performance Impact Analysis",
      "Intelligent Code Review",
      "Context Preservation",
      "Cross-Module Consistency"
    ],
    skip_consequence: "SUBOPTIMAL IMPLEMENTATION"
  }
}
```

---

## ğŸ’¡ REMEMBER

### Core Principles

1. **UPDATE > CREATE** - Always search 2-3 minutes before creating files
2. **Document Everything** - 10 minutes reserved every session for logs
3. **Quality > Speed** - 85%+ coverage, zero vulnerabilities, zero 'any' types
4. **Check Dependencies** - Before modifying ANY file, check who imports it
5. **Follow Conventions** - Consistency is critical (kebab-case, PascalCase)
6. **Security First** - OWASP Top 10 check on every code change
7. **Test Everything** - Write tests first or immediately after
8. **Deep Folders** - 3-4 levels minimum, never shallow placement
9. **Type Safety** - Zero 'any' types, explicit return types
10. **Never Break** - Assess breaking change risk before modifying public APIs

### Quick Commands

```bash
# Search before creating
find . -name '*keyword*' -type f
grep -r 'keyword' --include='*.ts'

# Check dependencies
grep -r 'from.*filename' --include='*.ts'

# Run tests with coverage
npm test -- --coverage

# Security audit
npm audit

# Type check
npm run type-check

# Lint and fix
npm run lint:fix
```

---

## ğŸ“Š METRICS & STATISTICS

**Project Scale**:
- 413 Directories
- 50+ Active Protocols
- 85%+ Test Coverage Target
- <200ms API Response Target
- <2s Page Load Target

**Intelligence Layers**:
- P0 Critical: 5 protocols (never skip)
- P1 Essential: 10 protocols (always apply)
- P2 Important: 15 protocols (enhance quality)
- P3 Beneficial: 20+ protocols (optimize)

**Documentation**:
- 1 Lean README (this file - 1,500 lines, single-read compatible)
- 14 Protocol Documents (detailed, reference as needed)
- 3 AI Guides (quick start, task routing, FAQ)
- 8 Main Docs (architecture, API, security, etc.)
- Session Logs (continuous knowledge preservation)

---

## ğŸ¯ NEXT STEPS FOR AI

1. **First Time Reading This?**
   - Read [docs/ai/QUICK_START_AI.md](docs/ai/QUICK_START_AI.md) next
   - Then [docs/protocols/00_QUICK_REFERENCE.md](docs/protocols/00_QUICK_REFERENCE.md)
   - Then start building!

2. **Starting a Task?**
   - Answer 5 self-awareness questions
   - Search 2-3 minutes before creating files
   - Check dependencies before modifying
   - Reserve 10 minutes for session log

3. **Need Help?**
   - Check [docs/protocols/07_COMMON_MISTAKES.md](docs/protocols/07_COMMON_MISTAKES.md)
   - Review relevant protocol docs
   - Check last session logs

4. **Finishing Session?**
   - Update CHANGELOG.md
   - Create session log
   - Update affected docs
   - Verify all tests pass

---

**Built with â¤ï¸ by Abstract Creatives LLC**
**For AI Assistants Everywhere**
**Version**: 3.0.0 (Optimized Edition)
**Last Updated**: 2025-11-05

ğŸš€ **Now 70% more efficient - Read once, build immediately!** ğŸš€
