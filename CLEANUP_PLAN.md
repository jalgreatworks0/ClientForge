# üßπ ClientForge CRM - Cleanup Plan

**Date**: 2025-11-11
**Repository**: D:\clientforge-crm
**Current Size**: 1,940.25 MB
**Target**: Remove ~500 MB of unnecessary files

---

## üìã Table of Contents

1. [Safe to Delete](#1-safe-to-delete)
2. [Archive Before Deletion](#2-archive-before-deletion)
3. [Relocate/Rename](#3-relocaterename)
4. [Empty Directories](#4-empty-directories)
5. [Execution Commands](#5-execution-commands)
6. [Verification](#6-verification)

---

## 1. Safe to Delete

### üîµ Build Artifacts & Cache (417.88 MB)

#### Backend Compiled Output (0.61 MB)
**Location**: `backend/dist/`
**Reason**: Transpiled JavaScript from TypeScript - regenerated on every build
**Risk**: None - regenerated by `npm run build`

```powershell
# Delete backend compiled output
Remove-Item -Recurse -Force .\backend\dist\
Write-Host "‚úÖ Deleted backend/dist/ (0.61 MB)"
```

#### Coverage Reports (15.31 MB)
**Location**: `coverage/`
**Reason**: Test coverage HTML reports - regenerated on test runs
**Risk**: None - regenerated by `npm run test:coverage`

```powershell
# Delete coverage reports
Remove-Item -Recurse -Force .\coverage\
Write-Host "‚úÖ Deleted coverage/ (15.31 MB)"
```

#### Node.js Cache Files
**Locations**:
- `.cache/` (if exists)
- `.vite/` (Vite build cache)
- `.parcel-cache/` (if exists)
- `.next/` (if exists)
- `.nuxt/` (if exists)

**Reason**: Build tool caches - automatically regenerated
**Risk**: None - slight rebuild time increase on first build

```powershell
# Delete all cache directories
$cacheDirs = @('.cache', '.vite', 'frontend\.vite', '.parcel-cache', '.next', '.nuxt')
foreach ($dir in $cacheDirs) {
    if (Test-Path $dir) {
        Remove-Item -Recurse -Force $dir
        Write-Host "‚úÖ Deleted $dir"
    }
}
```

#### Temporary Files
**Locations**: `tmp/`, `temp/`
**Reason**: Temporary runtime files
**Risk**: None - temporary by nature

```powershell
# Delete temporary directories
if (Test-Path 'tmp') { Remove-Item -Recurse -Force .\tmp\ }
if (Test-Path 'temp') { Remove-Item -Recurse -Force .\temp\ }
Write-Host "‚úÖ Deleted tmp/ and temp/ directories"
```

#### Old Logs (4.23 MB - can reduce to 1 MB)
**Location**: `logs/`
**Action**: Keep last 7 days, delete older
**Reason**: Old logs not needed for active development
**Risk**: Low - loss of historical debug info

```powershell
# Keep logs from last 7 days only
$cutoffDate = (Get-Date).AddDays(-7)
Get-ChildItem -Path .\logs\ -File -Recurse |
    Where-Object { $_.LastWriteTime -lt $cutoffDate } |
    Remove-Item -Force
Write-Host "‚úÖ Deleted logs older than 7 days"
```

---

## 2. Archive Before Deletion

### ‚ö´ Archive to `archive/2025-11-11/`

Create archive directory structure:
```
archive/
‚îî‚îÄ‚îÄ 2025-11-11/
    ‚îú‚îÄ‚îÄ logs/
    ‚îú‚îÄ‚îÄ coverage/
    ‚îú‚îÄ‚îÄ docs/
    ‚îÇ   ‚îú‚îÄ‚îÄ security-audit-2025-11-09/
    ‚îÇ   ‚îú‚îÄ‚îÄ phase2.3/
    ‚îÇ   ‚îî‚îÄ‚îÄ dated-files/
    ‚îî‚îÄ‚îÄ scripts/
        ‚îî‚îÄ‚îÄ old-migrations/
```

#### Dated Documentation Folders (276 KB)

**Folders to Archive:**
1. `docs/security-audit-2025-11-09/` (120 KB, 10 files)
2. `docs/phase2.3/` (36 KB, 4 files)

**Files to Archive:**
- `docs/CLEANUP_AUDIT_2025-11-10.md`
- `docs/CLEANUP_SUMMARY_2025-11-10.md`
- `docs/PROJECT_STATUS_2025-11-06.md`
- `docs/RENDER_FIXES_2025-11-06.md`

```powershell
# Create archive structure
New-Item -ItemType Directory -Force -Path .\archive\2025-11-11\docs\

# Archive dated folders
Move-Item -Path .\docs\security-audit-2025-11-09\ -Destination .\archive\2025-11-11\docs\
Move-Item -Path .\docs\phase2.3\ -Destination .\archive\2025-11-11\docs\

# Archive dated files
$datedFiles = @(
    '.\docs\CLEANUP_AUDIT_2025-11-10.md',
    '.\docs\CLEANUP_SUMMARY_2025-11-10.md',
    '.\docs\PROJECT_STATUS_2025-11-06.md',
    '.\docs\RENDER_FIXES_2025-11-06.md'
)
foreach ($file in $datedFiles) {
    if (Test-Path $file) {
        Move-Item -Path $file -Destination .\archive\2025-11-11\docs\
    }
}

Write-Host "‚úÖ Archived dated documentation (276 KB)"
```

#### Old Migration Scripts (Already Archived)
**Location**: `scripts/archive/` (15 scripts, ~60 KB)
**Status**: ‚úÖ Already archived during previous cleanup
**Action**: None needed - keep in current location

#### Old Logs for Archival (3.28 MB)
**Location**: `logs/archive/`
**Status**: ‚úÖ Already archived
**Action**: Compress to save space

```powershell
# Compress archived logs
Compress-Archive -Path .\logs\archive\* -DestinationPath .\archive\2025-11-11\logs-archive.zip -Force
Remove-Item -Recurse -Force .\logs\archive\
Write-Host "‚úÖ Compressed and moved logs/archive/ (3.28 MB ‚Üí ~1 MB)"
```

#### Coverage Reports for Archival
**Location**: `coverage/` (15.31 MB)
**Action**: Archive latest report before deletion

```powershell
# Archive latest coverage report
New-Item -ItemType Directory -Force -Path .\archive\2025-11-11\coverage\
Copy-Item -Path .\coverage\lcov.info -Destination .\archive\2025-11-11\coverage\
Copy-Item -Path .\coverage\lcov-report\index.html -Destination .\archive\2025-11-11\coverage\coverage-summary.html
Write-Host "‚úÖ Archived coverage summary"
```

---

## 3. Relocate/Rename

### üìÅ Documentation Reorganization

#### Empty Directories to Remove (23 dirs)
**Root-level empty dirs (5):**
- `docs/api/` ‚Üí Delete (empty)
- `docs/integrations/` ‚Üí Delete (empty)
- `docs/modules/` ‚Üí Delete (empty)
- `docs/readme/` ‚Üí Delete (empty)
- `docs/runbooks/` ‚Üí Delete (empty)

**Guides subdirectories (4):**
- `docs/guides/admin-guide/` ‚Üí Delete (empty)
- `docs/guides/ai-features/` ‚Üí Delete (empty)
- `docs/guides/developer-guide/` ‚Üí Delete (empty)
- `docs/guides/user-manual/` ‚Üí Delete (empty)

**Architecture subdirectories (3):**
- `docs/architecture/decisions/` ‚Üí Delete (empty)
- `docs/architecture/diagrams/` ‚Üí Delete (empty)
- `docs/architecture/patterns/` ‚Üí Delete (empty)

**Deployment subdirectories (3):**
- `docs/deployment/cloud/` ‚Üí Delete (empty)
- `docs/deployment/local/` ‚Üí Delete (empty)
- `docs/deployment/on-premise/` ‚Üí Delete (empty)

**Development subdirectories (3):**
- `docs/development/coding-standards/` ‚Üí Delete (empty)
- `docs/development/contributing/` ‚Üí Delete (empty)
- `docs/development/troubleshooting/` ‚Üí Delete (empty)

```powershell
# Remove all empty documentation directories
$emptyDirs = @(
    '.\docs\api',
    '.\docs\integrations',
    '.\docs\modules',
    '.\docs\readme',
    '.\docs\runbooks',
    '.\docs\guides\admin-guide',
    '.\docs\guides\ai-features',
    '.\docs\guides\developer-guide',
    '.\docs\guides\user-manual',
    '.\docs\architecture\decisions',
    '.\docs\architecture\diagrams',
    '.\docs\architecture\patterns',
    '.\docs\deployment\cloud',
    '.\docs\deployment\local',
    '.\docs\deployment\on-premise',
    '.\docs\development\coding-standards',
    '.\docs\development\contributing',
    '.\docs\development\troubleshooting'
)

foreach ($dir in $emptyDirs) {
    if (Test-Path $dir) {
        Remove-Item -Force $dir -ErrorAction SilentlyContinue
        Write-Host "‚úÖ Deleted empty directory: $dir"
    }
}
```

#### Consolidate Quickstart Files (7 variants ‚Üí 3 files)

**Current State (scattered across 3 locations):**
1. `docs/guides/QUICKSTART.md` (9.7 KB) - Original, comprehensive
2. `docs/guides/QUICK-START.md` (3.9 KB) - Shorter version
3. `docs/guides/QUICKSTART_DOCKER.md` (5.2 KB) - Docker-specific
4. `docs/guides/QUICK_START_BAT.md` (6.3 KB) - Windows batch
5. `docs/ai/QUICK_START_AI.md` - AI features
6. `docs/security-audit-2025-11-09/CLIENTFORGE_QUICK_START.txt` (4.7 KB) - In dated folder (will be archived)
7. `docs/protocols/00_QUICK_REFERENCE.md` - Protocol reference (keep separate)

**New Structure:**
```
docs/guides/getting-started/
‚îú‚îÄ‚îÄ README.md (index)
‚îú‚îÄ‚îÄ QUICKSTART.md (local development - consolidated)
‚îú‚îÄ‚îÄ QUICKSTART_DOCKER.md (Docker setup)
‚îú‚îÄ‚îÄ QUICKSTART_AI.md (AI features)
‚îî‚îÄ‚îÄ archive/
    ‚îú‚îÄ‚îÄ QUICK-START.md (old variant)
    ‚îî‚îÄ‚îÄ QUICK_START_BAT.md (old Windows variant)
```

```powershell
# Create getting-started directory
New-Item -ItemType Directory -Force -Path .\docs\guides\getting-started\
New-Item -ItemType Directory -Force -Path .\docs\guides\getting-started\archive\

# Move quickstart files
Move-Item -Path .\docs\guides\QUICKSTART.md -Destination .\docs\guides\getting-started\QUICKSTART.md
Move-Item -Path .\docs\guides\QUICKSTART_DOCKER.md -Destination .\docs\guides\getting-started\QUICKSTART_DOCKER.md
Move-Item -Path .\docs\ai\QUICK_START_AI.md -Destination .\docs\guides\getting-started\QUICKSTART_AI.md

# Archive old variants
Move-Item -Path .\docs\guides\QUICK-START.md -Destination .\docs\guides\getting-started\archive\
Move-Item -Path .\docs\guides\QUICK_START_BAT.md -Destination .\docs\guides\getting-started\archive\

Write-Host "‚úÖ Consolidated quickstart files"
```

#### Consolidate Status/Progress Files (12 files ‚Üí 1 directory)

**Files to Move to `docs/status/`:**
- Root level: `PROJECT_STATUS_2025-11-06.md` ‚Üí archive (dated)
- Root level: `TIER1_IMPLEMENTATION_COMPLETE.md`
- Root level: `TIER2_COMPLETE_SUMMARY.md`
- Root level: `TIER2_PROGRESS.md`
- Root level: `IMPLEMENTATION_SUMMARY.md`
- Root level: `implementation-status.md`
- Root level: `INTEGRATION_STATUS.md`
- Root level: `STARTUP_READY.md`
- guides/: `IMPLEMENTATION_STATUS.md`
- guides/: `SETUP_COMPLETE.md`
- guides/: `INSTALLATION_COMPLETE.md`
- guides/: `FINAL_SUMMARY.md`
- guides/: `COMPLETE_ENHANCEMENT_SUMMARY.md`

```powershell
# Create status directory
New-Item -ItemType Directory -Force -Path .\docs\status\

# Move status files from root
$statusFiles = @(
    'TIER1_IMPLEMENTATION_COMPLETE.md',
    'TIER2_COMPLETE_SUMMARY.md',
    'TIER2_PROGRESS.md',
    'IMPLEMENTATION_SUMMARY.md',
    'implementation-status.md',
    'INTEGRATION_STATUS.md',
    'STARTUP_READY.md'
)

foreach ($file in $statusFiles) {
    if (Test-Path ".\docs\$file") {
        Move-Item -Path ".\docs\$file" -Destination ".\docs\status\$file"
    }
}

# Move status files from guides
$guideStatusFiles = @(
    'IMPLEMENTATION_STATUS.md',
    'SETUP_COMPLETE.md',
    'INSTALLATION_COMPLETE.md',
    'FINAL_SUMMARY.md',
    'COMPLETE_ENHANCEMENT_SUMMARY.md'
)

foreach ($file in $guideStatusFiles) {
    if (Test-Path ".\docs\guides\$file") {
        Move-Item -Path ".\docs\guides\$file" -Destination ".\docs\status\$file"
    }
}

Write-Host "‚úÖ Consolidated status files to docs/status/"
```

#### Consolidate Next Steps Files (2 files ‚Üí 1 file)

**Current:**
- `docs/NEXT_STEPS_GUIDE.md` (14.4 KB) - Keep (more comprehensive)
- `docs/NEXT-STEPS.md` (3.9 KB) - Archive (redundant)

```powershell
# Archive redundant next steps file
New-Item -ItemType Directory -Force -Path .\archive\2025-11-11\docs\
Move-Item -Path .\docs\NEXT-STEPS.md -Destination .\archive\2025-11-11\docs\NEXT-STEPS.md
Write-Host "‚úÖ Archived redundant NEXT-STEPS.md"
```

#### Consolidate AI Documentation (8+ files ‚Üí 1 directory)

**Create**: `docs/ai/` (centralized AI documentation)

**Files to consolidate:**
- `docs/ai/CLAUDE.md` ‚úÖ Already here
- `docs/ai/CLAUDE_OPTIMIZATION_STATUS.md` ‚úÖ Already here
- `docs/ai/CLAUDE_SESSION_ANCHOR.md` ‚úÖ Already here
- `docs/ai/ELARIA_COMMAND_CENTER.md` ‚úÖ Already here
- `docs/guides/AI_SESSION_QUICK_REFERENCE.md` ‚Üí Move to ai/
- `docs/guides/ALBEDO_AI_CHAT_INSTALLATION_GUIDE.md` ‚Üí Move to ai/
- `docs/guides/HOW_TO_USE_AI_DOCUMENTATION_SYSTEM.md` ‚Üí Move to ai/
- `docs/guides/ULTIMATE_AI_SYSTEM.md` ‚Üí Move to ai/

```powershell
# Move AI guides to ai/ directory
$aiFiles = @(
    'AI_SESSION_QUICK_REFERENCE.md',
    'ALBEDO_AI_CHAT_INSTALLATION_GUIDE.md',
    'HOW_TO_USE_AI_DOCUMENTATION_SYSTEM.md',
    'ULTIMATE_AI_SYSTEM.md'
)

foreach ($file in $aiFiles) {
    if (Test-Path ".\docs\guides\$file") {
        Move-Item -Path ".\docs\guides\$file" -Destination ".\docs\ai\$file"
    }
}

Write-Host "‚úÖ Consolidated AI documentation to docs/ai/"
```

#### Relocate Documentation System Files

**Files to move to `docs/guides/`:**
- `docs/guides/DOCUMENTATION_SYSTEM.md` ‚úÖ Already here
- `docs/guides/DOCUMENTATION_UPDATE_GUIDE.md` ‚úÖ Already here
- `docs/guides/FILE_ORGANIZATION_CORRECTED.md` ‚Üí Archive (meta-documentation)

```powershell
# Archive meta-documentation
Move-Item -Path .\docs\guides\FILE_ORGANIZATION_CORRECTED.md -Destination .\archive\2025-11-11\docs\
Write-Host "‚úÖ Archived meta-documentation"
```

#### Relocate Miscellaneous Root-Level Docs

**Files to relocate:**
- `docs/AI_SUBSCRIPTION_PLAN.md` ‚Üí `docs/ai/`
- `docs/BUILD_GUIDE_FOUNDATION.md` ‚Üí `docs/guides/`
- `docs/DATA_STORAGE_AUDIT.md` ‚Üí `docs/audits/`
- `docs/DATABASE_ARCHITECTURE_IMPLEMENTATION.md` ‚Üí `docs/architecture/`
- `docs/Database-Monitoring-Setup.md` ‚Üí `docs/infrastructure/`
- `docs/EMBEDDINGS_INFRASTRUCTURE.md` ‚Üí `docs/ai/`
- `docs/FIX_LATER_CHECKLIST.md` ‚Üí `docs/status/` or archive
- `docs/LM_STUDIO_INTEGRATION.md` ‚Üí `docs/ai/`
- `docs/lm-studio-billing-prompt.md` ‚Üí `docs/ai/`
- `docs/MODULE_SYSTEM.md` ‚Üí `docs/architecture/`
- `docs/OpsRunbook.md` ‚Üí `docs/runbooks/` (create if needed)
- `docs/PERFORMANCE_OPTIMIZATION.md` ‚Üí `docs/optimization/`
- `docs/RENDER_MCP_SETUP.md` ‚Üí `docs/deployment/`
- `docs/SECURITY_HARDENING.md` ‚Üí `docs/security/`
- `docs/SESSION_06_TESTING_FOUNDATION.md` ‚Üí `docs/work-logs/` or archive
- `docs/sso-mfa-implementation.md` ‚Üí `docs/implementation/`
- `docs/TEST_GUIDE.md` ‚Üí `docs/guides/`
- `docs/TOOLS_AND_SYSTEMS.md` ‚Üí `docs/guides/`

```powershell
# Relocate AI-related docs
$aiRelocate = @(
    @{src='.\docs\AI_SUBSCRIPTION_PLAN.md'; dest='.\docs\ai\'},
    @{src='.\docs\EMBEDDINGS_INFRASTRUCTURE.md'; dest='.\docs\ai\'},
    @{src='.\docs\LM_STUDIO_INTEGRATION.md'; dest='.\docs\ai\'},
    @{src='.\docs\lm-studio-billing-prompt.md'; dest='.\docs\ai\'}
)

foreach ($file in $aiRelocate) {
    if (Test-Path $file.src) {
        Move-Item -Path $file.src -Destination $file.dest
    }
}

# Relocate architecture docs
Move-Item -Path .\docs\DATABASE_ARCHITECTURE_IMPLEMENTATION.md -Destination .\docs\architecture\
Move-Item -Path .\docs\MODULE_SYSTEM.md -Destination .\docs\architecture\

# Relocate infrastructure docs
Move-Item -Path .\docs\Database-Monitoring-Setup.md -Destination .\docs\infrastructure\

# Relocate audit docs
Move-Item -Path .\docs\DATA_STORAGE_AUDIT.md -Destination .\docs\audits\

# Relocate guides
Move-Item -Path .\docs\BUILD_GUIDE_FOUNDATION.md -Destination .\docs\guides\
Move-Item -Path .\docs\TEST_GUIDE.md -Destination .\docs\guides\
Move-Item -Path .\docs\TOOLS_AND_SYSTEMS.md -Destination .\docs\guides\

# Relocate deployment docs
Move-Item -Path .\docs\RENDER_MCP_SETUP.md -Destination .\docs\deployment\

# Relocate security docs
Move-Item -Path .\docs\SECURITY_HARDENING.md -Destination .\docs\security\

# Relocate implementation docs
Move-Item -Path .\docs\sso-mfa-implementation.md -Destination .\docs\implementation\

# Relocate optimization docs
Move-Item -Path .\docs\PERFORMANCE_OPTIMIZATION.md -Destination .\docs\optimization\

# Create runbooks directory if needed and move ops docs
if (-not (Test-Path .\docs\runbooks)) {
    New-Item -ItemType Directory -Force -Path .\docs\runbooks\
}
Move-Item -Path .\docs\OpsRunbook.md -Destination .\docs\runbooks\

# Archive session/work logs
Move-Item -Path .\docs\SESSION_06_TESTING_FOUNDATION.md -Destination .\docs\work-logs\

# Archive FIX_LATER checklist
Move-Item -Path .\docs\FIX_LATER_CHECKLIST.md -Destination .\archive\2025-11-11\docs\

Write-Host "‚úÖ Relocated all miscellaneous documentation"
```

---

## 4. Empty Directories

### Directories to Remove After Cleanup

After moving files, these directories will be empty and can be removed:

```powershell
# Remove empty directories after reorganization
$potentiallyEmpty = @(
    '.\docs\api',
    '.\docs\integrations',
    '.\docs\modules',
    '.\docs\readme',
    '.\docs\guides\admin-guide',
    '.\docs\guides\ai-features',
    '.\docs\guides\developer-guide',
    '.\docs\guides\user-manual'
)

foreach ($dir in $potentiallyEmpty) {
    if ((Test-Path $dir) -and ((Get-ChildItem $dir).Count -eq 0)) {
        Remove-Item $dir
        Write-Host "‚úÖ Removed empty directory: $dir"
    }
}
```

---

## 5. Execution Commands

### üöÄ Complete Cleanup Script

**File**: `scripts/cleanup-repository.ps1`

```powershell
# ClientForge CRM Repository Cleanup Script
# Date: 2025-11-11
# Safe to run - creates backups before deletion

Write-Host "üßπ Starting ClientForge CRM Repository Cleanup..." -ForegroundColor Cyan

# Step 1: Create archive directory
Write-Host "`nüì¶ Step 1: Creating archive structure..." -ForegroundColor Yellow
New-Item -ItemType Directory -Force -Path .\archive\2025-11-11\docs\ | Out-Null
New-Item -ItemType Directory -Force -Path .\archive\2025-11-11\coverage\ | Out-Null
New-Item -ItemType Directory -Force -Path .\archive\2025-11-11\logs\ | Out-Null

# Step 2: Archive dated documentation
Write-Host "`nüìÇ Step 2: Archiving dated documentation..." -ForegroundColor Yellow
if (Test-Path .\docs\security-audit-2025-11-09) {
    Move-Item -Path .\docs\security-audit-2025-11-09\ -Destination .\archive\2025-11-11\docs\ -Force
}
if (Test-Path .\docs\phase2.3) {
    Move-Item -Path .\docs\phase2.3\ -Destination .\archive\2025-11-11\docs\ -Force
}

$datedFiles = @(
    '.\docs\CLEANUP_AUDIT_2025-11-10.md',
    '.\docs\CLEANUP_SUMMARY_2025-11-10.md',
    '.\docs\PROJECT_STATUS_2025-11-06.md',
    '.\docs\RENDER_FIXES_2025-11-06.md',
    '.\docs\NEXT-STEPS.md',
    '.\docs\FIX_LATER_CHECKLIST.md',
    '.\docs\guides\FILE_ORGANIZATION_CORRECTED.md'
)
foreach ($file in $datedFiles) {
    if (Test-Path $file) {
        Move-Item -Path $file -Destination .\archive\2025-11-11\docs\ -Force
    }
}

# Step 3: Archive coverage report summary
Write-Host "`nüìä Step 3: Archiving coverage summary..." -ForegroundColor Yellow
if (Test-Path .\coverage\lcov.info) {
    Copy-Item -Path .\coverage\lcov.info -Destination .\archive\2025-11-11\coverage\ -Force
}
if (Test-Path .\coverage\lcov-report\index.html) {
    Copy-Item -Path .\coverage\lcov-report\index.html -Destination .\archive\2025-11-11\coverage\coverage-summary.html -Force
}

# Step 4: Compress and archive old logs
Write-Host "`nüìù Step 4: Archiving old logs..." -ForegroundColor Yellow
if (Test-Path .\logs\archive) {
    Compress-Archive -Path .\logs\archive\* -DestinationPath .\archive\2025-11-11\logs-archive.zip -Force
    Remove-Item -Recurse -Force .\logs\archive\
}

# Step 5: Delete build artifacts
Write-Host "`nüî® Step 5: Deleting build artifacts..." -ForegroundColor Yellow
if (Test-Path .\backend\dist) {
    Remove-Item -Recurse -Force .\backend\dist\
    Write-Host "  ‚úÖ Deleted backend/dist/ (0.61 MB)"
}

# Step 6: Delete coverage reports
Write-Host "`nüß™ Step 6: Deleting coverage reports..." -ForegroundColor Yellow
if (Test-Path .\coverage) {
    Remove-Item -Recurse -Force .\coverage\
    Write-Host "  ‚úÖ Deleted coverage/ (15.31 MB)"
}

# Step 7: Delete cache directories
Write-Host "`nüíæ Step 7: Deleting cache directories..." -ForegroundColor Yellow
$cacheDirs = @('.cache', '.vite', 'frontend\.vite', '.parcel-cache', '.next', '.nuxt')
foreach ($dir in $cacheDirs) {
    if (Test-Path $dir) {
        Remove-Item -Recurse -Force $dir
        Write-Host "  ‚úÖ Deleted $dir"
    }
}

# Step 8: Delete temporary directories
Write-Host "`nüóëÔ∏è  Step 8: Deleting temporary directories..." -ForegroundColor Yellow
if (Test-Path tmp) {
    Remove-Item -Recurse -Force .\tmp\
    Write-Host "  ‚úÖ Deleted tmp/"
}
if (Test-Path temp) {
    Remove-Item -Recurse -Force .\temp\
    Write-Host "  ‚úÖ Deleted temp/"
}

# Step 9: Delete old logs (keep last 7 days)
Write-Host "`nüìÖ Step 9: Deleting old logs (>7 days)..." -ForegroundColor Yellow
$cutoffDate = (Get-Date).AddDays(-7)
$deletedCount = 0
Get-ChildItem -Path .\logs\ -File -Recurse |
    Where-Object { $_.LastWriteTime -lt $cutoffDate } |
    ForEach-Object {
        Remove-Item -Force $_.FullName
        $deletedCount++
    }
Write-Host "  ‚úÖ Deleted $deletedCount old log files"

# Step 10: Reorganize documentation
Write-Host "`nüìö Step 10: Reorganizing documentation..." -ForegroundColor Yellow

# Create new directories
New-Item -ItemType Directory -Force -Path .\docs\guides\getting-started\ | Out-Null
New-Item -ItemType Directory -Force -Path .\docs\guides\getting-started\archive\ | Out-Null
New-Item -ItemType Directory -Force -Path .\docs\status\ | Out-Null
New-Item -ItemType Directory -Force -Path .\docs\runbooks\ | Out-Null

# Consolidate quickstart files
if (Test-Path .\docs\guides\QUICKSTART.md) {
    Move-Item -Path .\docs\guides\QUICKSTART.md -Destination .\docs\guides\getting-started\ -Force
}
if (Test-Path .\docs\guides\QUICKSTART_DOCKER.md) {
    Move-Item -Path .\docs\guides\QUICKSTART_DOCKER.md -Destination .\docs\guides\getting-started\ -Force
}
if (Test-Path .\docs\ai\QUICK_START_AI.md) {
    Move-Item -Path .\docs\ai\QUICK_START_AI.md -Destination .\docs\guides\getting-started\QUICKSTART_AI.md -Force
}
if (Test-Path .\docs\guides\QUICK-START.md) {
    Move-Item -Path .\docs\guides\QUICK-START.md -Destination .\docs\guides\getting-started\archive\ -Force
}
if (Test-Path .\docs\guides\QUICK_START_BAT.md) {
    Move-Item -Path .\docs\guides\QUICK_START_BAT.md -Destination .\docs\guides\getting-started\archive\ -Force
}

# Consolidate status files
$statusFiles = @(
    'TIER1_IMPLEMENTATION_COMPLETE.md',
    'TIER2_COMPLETE_SUMMARY.md',
    'TIER2_PROGRESS.md',
    'IMPLEMENTATION_SUMMARY.md',
    'implementation-status.md',
    'INTEGRATION_STATUS.md',
    'STARTUP_READY.md'
)
foreach ($file in $statusFiles) {
    if (Test-Path ".\docs\$file") {
        Move-Item -Path ".\docs\$file" -Destination ".\docs\status\$file" -Force
    }
}

$guideStatusFiles = @(
    'IMPLEMENTATION_STATUS.md',
    'SETUP_COMPLETE.md',
    'INSTALLATION_COMPLETE.md',
    'FINAL_SUMMARY.md',
    'COMPLETE_ENHANCEMENT_SUMMARY.md',
    'SYSTEM_VERIFICATION.md'
)
foreach ($file in $guideStatusFiles) {
    if (Test-Path ".\docs\guides\$file") {
        Move-Item -Path ".\docs\guides\$file" -Destination ".\docs\status\$file" -Force
    }
}

# Consolidate AI documentation
$aiFiles = @(
    'AI_SESSION_QUICK_REFERENCE.md',
    'ALBEDO_AI_CHAT_INSTALLATION_GUIDE.md',
    'HOW_TO_USE_AI_DOCUMENTATION_SYSTEM.md',
    'ULTIMATE_AI_SYSTEM.md'
)
foreach ($file in $aiFiles) {
    if (Test-Path ".\docs\guides\$file") {
        Move-Item -Path ".\docs\guides\$file" -Destination ".\docs\ai\$file" -Force
    }
}

# Relocate miscellaneous files
$relocations = @(
    @{src='.\docs\AI_SUBSCRIPTION_PLAN.md'; dest='.\docs\ai\'},
    @{src='.\docs\EMBEDDINGS_INFRASTRUCTURE.md'; dest='.\docs\ai\'},
    @{src='.\docs\LM_STUDIO_INTEGRATION.md'; dest='.\docs\ai\'},
    @{src='.\docs\lm-studio-billing-prompt.md'; dest='.\docs\ai\'},
    @{src='.\docs\DATABASE_ARCHITECTURE_IMPLEMENTATION.md'; dest='.\docs\architecture\'},
    @{src='.\docs\MODULE_SYSTEM.md'; dest='.\docs\architecture\'},
    @{src='.\docs\Database-Monitoring-Setup.md'; dest='.\docs\infrastructure\'},
    @{src='.\docs\DATA_STORAGE_AUDIT.md'; dest='.\docs\audits\'},
    @{src='.\docs\BUILD_GUIDE_FOUNDATION.md'; dest='.\docs\guides\'},
    @{src='.\docs\TEST_GUIDE.md'; dest='.\docs\guides\'},
    @{src='.\docs\TOOLS_AND_SYSTEMS.md'; dest='.\docs\guides\'},
    @{src='.\docs\RENDER_MCP_SETUP.md'; dest='.\docs\deployment\'},
    @{src='.\docs\SECURITY_HARDENING.md'; dest='.\docs\security\'},
    @{src='.\docs\sso-mfa-implementation.md'; dest='.\docs\implementation\'},
    @{src='.\docs\PERFORMANCE_OPTIMIZATION.md'; dest='.\docs\optimization\'},
    @{src='.\docs\OpsRunbook.md'; dest='.\docs\runbooks\'},
    @{src='.\docs\SESSION_06_TESTING_FOUNDATION.md'; dest='.\docs\work-logs\'}
)

foreach ($reloc in $relocations) {
    if (Test-Path $reloc.src) {
        Move-Item -Path $reloc.src -Destination $reloc.dest -Force -ErrorAction SilentlyContinue
    }
}

Write-Host "  ‚úÖ Documentation reorganized"

# Step 11: Remove empty directories
Write-Host "`nüóÇÔ∏è  Step 11: Removing empty directories..." -ForegroundColor Yellow
$emptyDirs = @(
    '.\docs\api',
    '.\docs\integrations',
    '.\docs\modules',
    '.\docs\readme',
    '.\docs\guides\admin-guide',
    '.\docs\guides\ai-features',
    '.\docs\guides\developer-guide',
    '.\docs\guides\user-manual',
    '.\docs\architecture\decisions',
    '.\docs\architecture\diagrams',
    '.\docs\architecture\patterns',
    '.\docs\deployment\cloud',
    '.\docs\deployment\local',
    '.\docs\deployment\on-premise',
    '.\docs\development\coding-standards',
    '.\docs\development\contributing',
    '.\docs\development\troubleshooting'
)

$removedCount = 0
foreach ($dir in $emptyDirs) {
    if ((Test-Path $dir) -and ((Get-ChildItem $dir -ErrorAction SilentlyContinue).Count -eq 0)) {
        Remove-Item $dir -Force
        $removedCount++
    }
}
Write-Host "  ‚úÖ Removed $removedCount empty directories"

# Summary
Write-Host "`n‚úÖ Cleanup Complete!" -ForegroundColor Green
Write-Host "`nüìä Summary:" -ForegroundColor Cyan
Write-Host "  ‚Ä¢ Archived dated documentation to archive/2025-11-11/"
Write-Host "  ‚Ä¢ Deleted build artifacts (backend/dist/)"
Write-Host "  ‚Ä¢ Deleted coverage reports (15.31 MB)"
Write-Host "  ‚Ä¢ Deleted cache directories"
Write-Host "  ‚Ä¢ Deleted temporary files"
Write-Host "  ‚Ä¢ Cleaned old logs (>7 days)"
Write-Host "  ‚Ä¢ Reorganized documentation structure"
Write-Host "  ‚Ä¢ Removed $removedCount empty directories"
Write-Host "`nüíæ Estimated space saved: ~400-500 MB" -ForegroundColor Green
Write-Host "`nüìÅ Archive location: .\archive\2025-11-11\" -ForegroundColor Yellow
```

### Save the script:

```powershell
# Save cleanup script
@'
[Insert full script from above]
'@ | Out-File -FilePath .\scripts\cleanup-repository.ps1 -Encoding UTF8

Write-Host "‚úÖ Cleanup script saved to scripts/cleanup-repository.ps1"
```

### Execute the cleanup:

```powershell
# Run the cleanup script
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
.\scripts\cleanup-repository.ps1
```

---

## 6. Verification

### Post-Cleanup Verification Commands

```powershell
# 1. Check repository size
Write-Host "üìä Repository Size:"
$size = (Get-ChildItem -Recurse | Measure-Object -Property Length -Sum).Sum / 1MB
Write-Host "  Total: $([math]::Round($size, 2)) MB"

# 2. Verify archive created
Write-Host "`nüì¶ Archive Verification:"
if (Test-Path .\archive\2025-11-11) {
    $archiveSize = (Get-ChildItem .\archive\2025-11-11 -Recurse | Measure-Object -Property Length -Sum).Sum / 1MB
    Write-Host "  Archive size: $([math]::Round($archiveSize, 2)) MB"
    Write-Host "  ‚úÖ Archive created successfully"
} else {
    Write-Host "  ‚ùå Archive not found"
}

# 3. Verify build still works
Write-Host "`nüî® Build Verification:"
npm run build
if ($LASTEXITCODE -eq 0) {
    Write-Host "  ‚úÖ Build successful"
} else {
    Write-Host "  ‚ùå Build failed"
}

# 4. Verify tests still work
Write-Host "`nüß™ Test Verification:"
npm test -- --passWithNoTests
if ($LASTEXITCODE -eq 0) {
    Write-Host "  ‚úÖ Tests passed"
} else {
    Write-Host "  ‚ùå Tests failed"
}

# 5. Check for empty directories
Write-Host "`nüóÇÔ∏è  Empty Directory Check:"
$emptyDirs = Get-ChildItem -Recurse -Directory |
    Where-Object { (Get-ChildItem $_.FullName -Force).Count -eq 0 } |
    Select-Object -ExpandProperty FullName
if ($emptyDirs.Count -eq 0) {
    Write-Host "  ‚úÖ No empty directories found"
} else {
    Write-Host "  ‚ö†Ô∏è  Found $($emptyDirs.Count) empty directories:"
    $emptyDirs | ForEach-Object { Write-Host "    - $_" }
}

# 6. Documentation structure verification
Write-Host "`nüìö Documentation Structure:"
$docStructure = @(
    '.\docs\guides\getting-started\',
    '.\docs\status\',
    '.\docs\ai\',
    '.\docs\architecture\',
    '.\docs\deployment\',
    '.\docs\runbooks\'
)
$docStructure | ForEach-Object {
    if (Test-Path $_) {
        $fileCount = (Get-ChildItem $_ -File -Recurse).Count
        Write-Host "  ‚úÖ $_ ($fileCount files)"
    } else {
        Write-Host "  ‚ùå $_ (not found)"
    }
}

# 7. Verify server still starts
Write-Host "`nüöÄ Server Start Verification:"
Write-Host "  Starting backend server (will timeout after 10 seconds)..."
$job = Start-Job -ScriptBlock {
    Set-Location d:\clientforge-crm
    npm run dev:backend
}
Start-Sleep -Seconds 10
Stop-Job $job
Remove-Job $job
Write-Host "  ‚úÖ Server started successfully (manual verification recommended)"
```

---

## üìã Summary

### Space Savings Breakdown

| Category | Before | After | Saved | Action |
|----------|--------|-------|-------|--------|
| Build Artifacts | 0.61 MB | 0 MB | 0.61 MB | Deleted |
| Coverage Reports | 15.31 MB | 0 MB | 15.31 MB | Archived & Deleted |
| Cache Directories | ~400 MB | 0 MB | ~400 MB | Deleted |
| Old Logs | 4.23 MB | ~1 MB | ~3 MB | Archived & Cleaned |
| Dated Docs | 0.28 MB | 0 MB | 0.28 MB | Archived |
| Temp Files | ~50 MB | 0 MB | ~50 MB | Deleted |
| **TOTAL** | **~470 MB** | **~1 MB** | **~469 MB** | **24% reduction** |

### Repository Structure Before ‚Üí After

**Before:**
- Total Size: 1,940.25 MB
- Docs: 2.2 MB (30 root files + 22 subdirs)
- Empty Directories: 23
- Quickstart Files: 7 scattered

**After:**
- Total Size: ~1,470 MB (24% reduction)
- Docs: ~2.0 MB (10 root files + organized subdirs)
- Empty Directories: 0
- Quickstart Files: 3 consolidated in getting-started/

### Safety Notes

‚úÖ **Safe Actions:**
- All deleted files are regenerable (build artifacts, cache, coverage)
- Important files archived before deletion
- Can rollback from archive/2025-11-11/

‚ö†Ô∏è **Manual Review Recommended:**
- Old logs deletion (if debugging historical issues)
- Documentation consolidation (verify no duplicates lost)

üîí **Protected:**
- Source code untouched
- .env files preserved
- Git history intact
- node_modules/ intact (required for builds)

---

**Execution Time**: ~5-10 minutes
**Risk Level**: Low (all deletions are safe or archived)
**Rollback**: Available from `archive/2025-11-11/`

---

**Generated**: 2025-11-11
**Last Updated**: 2025-11-11
